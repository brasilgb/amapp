import{q as S,r as g,j as e,a as w,y as F}from"./app-BSpTI7g3.js";import{C as O,a as z,b as V,c as k}from"./card-BTQ_EM_a.js";import{A as L}from"./AdminLayout-XOCzoeeP.js";import{z as l,u as B,t as E,F as I,a as n,b as c,c as o,d as i,I as d,e as t,L as T,S as _}from"./input-CMcJobAo.js";import{B as A}from"./button-ohafPp-T.js";import{S as M,a as P,b as $,c as R,d as q}from"./select-DTin5ba9.js";import{A as H,s as J}from"./dataSelect-BW0Lz3WV.js";import{T as U}from"./textarea-CAucYs0w.js";import{m as W,a as D,b as G,c as K,u as Q}from"./mask-98ej_Xwf.js";import{B as X,C as Y}from"./index-DoX99EMX.js";import"./index-qF0zXVJ-.js";import"./createLucideIcon-CDc2HlfE.js";import"./sliders-horizontal-CYJQvqXV.js";const Z=l.object({corpreason:l.string().min(1,{message:"O campo razão social deve ser preenchido"}),organization:l.string().optional(),subnumber:l.string().min(1,{message:"O campo número filial deve ser preenchido"}),subname:l.string().min(1,{message:"O campo nome filial deve ser preenchido"}),cep:l.string().min(1,{message:"O campo cep deve ser preenchido"}),address:l.string().min(1,{message:"O campo endereço deve ser preenchido"}),number:l.string().min(1,{message:"O campo número deve ser preenchido"}),county:l.string().min(1,{message:"O campo município deve ser preenchido"}),state:l.string().min(1,{message:"O campo estado deve ser preenchido"}),neighborhood:l.string().min(1,{message:"O campo bairro deve ser preenchido"}),cnpj:l.string().min(1,{message:"O campo cnpj deve ser preenchido"}),statereg:l.string().min(1,{message:"O campo inscrição estadual deve ser preenchido"}),telephone:l.string().min(1,{message:"O campo telefone deve ser preenchido"}),organization_id:l.string(),altername:l.string(),status:l.string(),whatsapp:l.string(),observation:l.string()}),pe=({companies:a,organizations:h})=>{const{errors:ee,flash:p}=S().props,[j,u]=g.useState([]),[v,se]=g.useState(!1),r=B({resolver:E(Z),defaultValues:{organization_id:a.organization_id.toString(),corpreason:a.corpreason,altername:a.altername,organization:a.organization.name,status:a.status,subnumber:a.subnumber,subname:a.subname,address:a.address,number:a.number.toString(),cep:a.cep,county:a.county,state:a.state,neighborhood:a.neighborhood,cnpj:a.cnpj,statereg:a.statereg,telephone:a.telephone,whatsapp:a.whatsapp,observation:a.observation}});function f(s){F.patch(route("companies.update",a.id),s)}const b=s=>{if(r.setValue("organization",s),s.length>2){const x=s.toLowerCase(),m=h==null?void 0:h.filter(y=>y.name.toLowerCase().includes(x));u(m)}},N=(s,x)=>{r.setValue("organization_id",`${s}`),r.setValue("organization",x),u([])},C=s=>{const x=Q(s);fetch(`https://viacep.com.br/ws/${x}/json/`).then(m=>m.json()).then(m=>{r.setValue("state",m.uf),r.setValue("county",m.localidade),r.setValue("neighborhood",m.bairro),r.setValue("address",m.logradouro)}).catch(m=>console.error(m))};return e.jsx(L,{children:e.jsx("div",{className:"p-4 bg-background",children:e.jsxs(O,{children:[e.jsx(z,{children:e.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[e.jsxs("div",{className:"flex text-gray-600",children:[e.jsx(X,{size:28,className:"mr-1 "}),e.jsx(V,{className:"text-lg sm:text-xl select-none uppercase",children:"Filiais"})]}),e.jsxs(w,{href:route("companies.index"),className:`flex h-9 w-9 shrink-0 items-center justify-center rounded-lg
                                         bg-green-700 hover:bg-green-700/90 text-white transition-colors hover:text-gray-100`,children:[e.jsx(H,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Voltar a Filial"})]})]})}),e.jsxs(k,{children:[p.message&&e.jsxs("div",{className:"bg-green-500 text-white text-sm font-semibold flex items-center justify-start gap-1 p-2 rounded-md transition-all duration-300",children:[e.jsx(Y,{className:"w-4 h-4"})," ",p.message]}),e.jsx("div",{children:e.jsx(I,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(f),className:"space-y-8",children:[e.jsxs("div",{className:"grid sm:grid-cols-7 gap-4 mt-4",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(n,{control:r.control,name:"corpreason",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"Razão social"}),e.jsx(i,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(t,{})]})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(n,{control:r.control,name:"altername",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"Nome alternativo"}),e.jsx(i,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(t,{})]})})}),e.jsxs("div",{className:"col-span-2 relative",children:[e.jsx(n,{control:r.control,name:"organization_id",render:({field:s})=>e.jsxs(c,{className:"hidden",children:[e.jsx(i,{children:e.jsx(d,{...s,value:s.value})}),e.jsx(t,{})]})}),e.jsx(n,{control:r.control,name:"organization",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"Organização"}),e.jsx(i,{children:e.jsx(d,{placeholder:"",...s,value:s.value,onChange:x=>b(x.target.value)})}),e.jsx(t,{})]})}),j.length>0&&e.jsx("div",{className:"absolute z-20 bg-gray-50 border-2 border-white shadow-md w-full rounded-sm top-16 max-h-52 overflow-y-auto",children:e.jsx("ul",{className:"p-1",children:j.map((s,x)=>e.jsx("li",{className:`flex items-center justify-normal ${x<j.length-1?"border-b border-gray-200":""}`,children:e.jsx("div",{className:"text-sm text-gray-600 p-1 cursor-pointer inline-block w-full",onClick:()=>N(s.id,s.name),children:s.name})},x))})})]}),e.jsx("div",{children:e.jsx(n,{control:r.control,name:"status",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"Status"}),e.jsxs(M,{onValueChange:s.onChange,defaultValue:s.value,value:s.value,children:[e.jsx(P,{className:"",children:e.jsx($,{placeholder:s.value})}),e.jsx(R,{children:J.map((x,m)=>e.jsx(q,{value:x.value,children:x.label},m))})]})]})})})]}),e.jsxs("div",{className:"grid sm:grid-cols-6 gap-4 mt-4",children:[e.jsx("div",{className:"",children:e.jsx(n,{control:r.control,name:"subnumber",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"Nº Filial"}),e.jsx(i,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(t,{})]})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(n,{control:r.control,name:"subname",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"Nome filial"}),e.jsx(i,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(t,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:r.control,name:"cep",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"CEP"}),e.jsx(i,{children:e.jsx(d,{placeholder:"",...s,value:W(s.value),onBlur:()=>C(s.value)})}),e.jsx(t,{})]})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(n,{control:r.control,name:"address",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"Endereço"}),e.jsx(i,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(t,{})]})})})]}),e.jsxs("div",{className:"grid sm:grid-cols-6 gap-4 mt-4",children:[e.jsx("div",{className:"",children:e.jsx(n,{control:r.control,name:"number",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"Número"}),e.jsx(i,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(t,{})]})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(n,{control:r.control,name:"county",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"Município"}),e.jsx(i,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(t,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:r.control,name:"state",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"UF"}),e.jsx(i,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(t,{})]})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(n,{control:r.control,name:"neighborhood",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"Bairro"}),e.jsx(i,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(t,{})]})})})]}),e.jsxs("div",{className:"grid sm:grid-cols-4 gap-4 mt-4",children:[e.jsx("div",{className:"",children:e.jsx(n,{control:r.control,name:"cnpj",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"CNPJ"}),e.jsx(i,{children:e.jsx(d,{placeholder:"",...s,value:D(s.value)})}),e.jsx(t,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:r.control,name:"statereg",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"Inscrição"}),e.jsx(i,{children:e.jsx(d,{placeholder:"",...s,value:G(s.value)})}),e.jsx(t,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:r.control,name:"telephone",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"Telefone"}),e.jsx(i,{children:e.jsx(d,{placeholder:"",...s,value:K(s.value)})}),e.jsx(t,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:r.control,name:"whatsapp",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"Whatsapp(Ex.: 5551985471163)"}),e.jsx(i,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(t,{})]})})})]}),e.jsx("div",{className:"",children:e.jsx(n,{control:r.control,name:"observation",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(o,{children:"Observações"}),e.jsx(i,{children:e.jsx(U,{placeholder:"",...s})}),e.jsx(t,{})]})})}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs(A,{className:"flex gap-2 bg-blue-600 hover:bg-blue-600/90",type:"submit",children:[v?e.jsx(T,{size:18,className:"animate-spin"}):e.jsx(_,{size:18}),e.jsx("span",{children:"Salvar"})]})})]})})})]})]})})})};export{pe as default};
