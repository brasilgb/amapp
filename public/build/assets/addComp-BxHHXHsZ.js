import{q as C,r as j,j as e,a as y,y as S}from"./app-C4qh0mEh.js";import{C as w,a as O,b as F,c as z}from"./card-DFwncd-S.js";import{A as V}from"./AdminLayout-B47u4XNS.js";import{z as a,u as k,F as L,a as l,b as n,c,d as o,I as d,e as i,L as B,S as E,t as I}from"./input-DxaNGCZS.js";import{B as T}from"./button-B8sZM8AG.js";import{S as A,a as _,b as M,c as P,d as $}from"./select-BhaTQ6fu.js";import{A as R,s as q}from"./dataSelect-p6zyfI1S.js";import{T as H}from"./textarea-Bt8ZLtQz.js";import{m as J,a as U,b as W,c as D,u as G}from"./mask-98ej_Xwf.js";import{B as K}from"./index-CAB0cIM5.js";import"./index-C-cBhlU4.js";import"./createLucideIcon-Cj5ilMqY.js";import"./sliders-horizontal-CTbylhgT.js";const Q=a.object({corpreason:a.string().min(1,{message:"O campo razão social deve ser preenchido"}),organization:a.string().min(1,{message:"O campo organização deve ser preenchido"}),subnumber:a.string().min(1,{message:"O campo número filial deve ser preenchido"}),subname:a.string().min(1,{message:"O campo nome filial deve ser preenchido"}),cep:a.string().min(1,{message:"O campo cep deve ser preenchido"}),address:a.string().min(1,{message:"O campo endereço deve ser preenchido"}),number:a.string().min(1,{message:"O campo número deve ser preenchido"}),county:a.string().min(1,{message:"O campo município deve ser preenchido"}),state:a.string().min(1,{message:"O campo estado deve ser preenchido"}),neighborhood:a.string().min(1,{message:"O campo bairro deve ser preenchido"}),cnpj:a.string().min(1,{message:"O campo cnpj deve ser preenchido"}),statereg:a.string().min(1,{message:"O campo inscrição estadual deve ser preenchido"}),telephone:a.string().min(1,{message:"O campo telefone deve ser preenchido"}),organization_id:a.string(),altername:a.string(),status:a.string(),whatsapp:a.string(),observation:a.string()}),xe=({organizations:m})=>{C().props;const[h,p]=j.useState([]),[u,X]=j.useState(!1),r=k({resolver:I(Q),defaultValues:{organization_id:"",corpreason:"",altername:"",organization:"",status:"waiting",subnumber:"",subname:"",address:"",number:"",cep:"",county:"",state:"",neighborhood:"",cnpj:"",statereg:"",telephone:"",whatsapp:"",observation:""}});function g(s){S.post(route("companies.store"),s)}j.useEffect(()=>{console.log(r.getValues("organization"))},[r]);const f=s=>{if(r.setValue("organization",s),s.length>2){const t=s.toLowerCase(),x=m==null?void 0:m.filter(b=>b.name.toLowerCase().includes(t));p(x)}},v=(s,t)=>{r.setValue("organization_id",`${s}`),r.setValue("organization",t),p([])},N=s=>{const t=G(s);fetch(`https://viacep.com.br/ws/${t}/json/`).then(x=>x.json()).then(x=>{r.setValue("state",x.uf),r.setValue("county",x.localidade),r.setValue("neighborhood",x.bairro),r.setValue("address",x.logradouro)}).catch(x=>console.error(x))};return e.jsx(V,{children:e.jsx("div",{className:"p-4 bg-background",children:e.jsxs(w,{children:[e.jsx(O,{children:e.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[e.jsxs("div",{className:"flex text-gray-600",children:[e.jsx(K,{size:28,className:"mr-1 "}),e.jsx(F,{className:"text-lg sm:text-xl select-none uppercase",children:"Filiais"})]}),e.jsxs(y,{href:route("companies.index"),className:`flex h-9 w-9 shrink-0 items-center justify-center rounded-lg
                                         bg-green-700 hover:bg-green-700/90 text-white transition-colors hover:text-gray-100`,children:[e.jsx(R,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Voltar a Filial"})]})]})}),e.jsx(z,{children:e.jsx("div",{children:e.jsx(L,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(g),className:"space-y-8",children:[e.jsxs("div",{className:"grid sm:grid-cols-7 gap-4 mt-4",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(l,{control:r.control,name:"corpreason",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"Razão social"}),e.jsx(o,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(i,{})]})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(l,{control:r.control,name:"altername",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"Nome alternativo"}),e.jsx(o,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(i,{})]})})}),e.jsxs("div",{className:"col-span-2 relative",children:[e.jsx(l,{control:r.control,name:"organization_id",render:({field:s})=>e.jsxs(n,{className:"hidden",children:[e.jsx(o,{children:e.jsx(d,{...s,value:s.value})}),e.jsx(i,{})]})}),e.jsx(l,{control:r.control,name:"organization",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"Organização"}),e.jsx(o,{children:e.jsx(d,{placeholder:"",...s,onChange:t=>f(t.target.value)})}),e.jsx(i,{})]})}),h.length>0&&e.jsx("div",{className:"absolute z-20 bg-gray-50 border-2 border-white shadow-md w-full rounded-sm top-16 max-h-52 overflow-y-auto",children:e.jsx("ul",{className:"p-1",children:h.map((s,t)=>e.jsx("li",{className:`flex items-center justify-normal ${t<h.length-1?"border-b border-gray-200":""}`,children:e.jsx("div",{className:"text-sm text-gray-600 p-1 cursor-pointer inline-block w-full",onClick:()=>v(s.id,s.name),children:s.name})},t))})})]}),e.jsx("div",{children:e.jsx(l,{control:r.control,name:"status",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"Status"}),e.jsxs(A,{onValueChange:s.onChange,defaultValue:s.value,value:s.value,children:[e.jsx(_,{className:"",children:e.jsx(M,{placeholder:s.value})}),e.jsx(P,{children:q.map((t,x)=>e.jsx($,{value:t.value,children:t.label},x))})]})]})})})]}),e.jsxs("div",{className:"grid sm:grid-cols-6 gap-4 mt-4",children:[e.jsx("div",{className:"",children:e.jsx(l,{control:r.control,name:"subnumber",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"Nº Filial"}),e.jsx(o,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(i,{})]})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(l,{control:r.control,name:"subname",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"Nome filial"}),e.jsx(o,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(i,{})]})})}),e.jsx("div",{className:"",children:e.jsx(l,{control:r.control,name:"cep",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"CEP"}),e.jsx(o,{children:e.jsx(d,{placeholder:"",...s,value:J(s.value),onBlur:()=>N(s.value)})}),e.jsx(i,{})]})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(l,{control:r.control,name:"address",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"Endereço"}),e.jsx(o,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(i,{})]})})})]}),e.jsxs("div",{className:"grid sm:grid-cols-6 gap-4 mt-4",children:[e.jsx("div",{className:"",children:e.jsx(l,{control:r.control,name:"number",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"Número"}),e.jsx(o,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(i,{})]})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(l,{control:r.control,name:"county",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"Município"}),e.jsx(o,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(i,{})]})})}),e.jsx("div",{className:"",children:e.jsx(l,{control:r.control,name:"state",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"UF"}),e.jsx(o,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(i,{})]})})}),e.jsx("div",{className:"col-span-2",children:e.jsx(l,{control:r.control,name:"neighborhood",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"Bairro"}),e.jsx(o,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(i,{})]})})})]}),e.jsxs("div",{className:"grid sm:grid-cols-4 gap-4 mt-4",children:[e.jsx("div",{className:"",children:e.jsx(l,{control:r.control,name:"cnpj",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"CNPJ"}),e.jsx(o,{children:e.jsx(d,{placeholder:"",...s,value:U(s.value)})}),e.jsx(i,{})]})})}),e.jsx("div",{className:"",children:e.jsx(l,{control:r.control,name:"statereg",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"Inscrição"}),e.jsx(o,{children:e.jsx(d,{placeholder:"",...s,value:W(s.value)})}),e.jsx(i,{})]})})}),e.jsx("div",{className:"",children:e.jsx(l,{control:r.control,name:"telephone",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"Telefone"}),e.jsx(o,{children:e.jsx(d,{placeholder:"",...s,value:D(s.value)})}),e.jsx(i,{})]})})}),e.jsx("div",{className:"",children:e.jsx(l,{control:r.control,name:"whatsapp",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"Whatsapp(Ex.: 5551985471163)"}),e.jsx(o,{children:e.jsx(d,{placeholder:"",...s})}),e.jsx(i,{})]})})})]}),e.jsx("div",{className:"",children:e.jsx(l,{control:r.control,name:"observation",render:({field:s})=>e.jsxs(n,{className:"flex flex-col",children:[e.jsx(c,{children:"Observações"}),e.jsx(o,{children:e.jsx(H,{placeholder:"",...s})}),e.jsx(i,{})]})})}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs(T,{className:"flex gap-2 bg-blue-600 hover:bg-blue-600/90",type:"submit",children:[u?e.jsx(B,{size:18,className:"animate-spin"}):e.jsx(E,{size:18}),e.jsx("span",{children:"Salvar"})]})})]})})})})]})})})};export{xe as default};
